<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/common.xhtml">
	<ui:define name="pageTitle">Crear Pacient</ui:define>
	<ui:define name="pageHeader">Crear Paciente</ui:define>
	<ui:define name="body">
		<h:form id="frmPaciente" prependId="false">
			<p:focus id="focus" for="name" />
			<p:panel header="Datos del paciente">
				<h:panelGrid columns="4" >
					<p:outputLabel value="Apellido paterno" for="appaterno" />
					<p:inputText id="appaterno"
						value="#{patientPersistence.model.lastName}" required="true" />
					<p:outputLabel value="Apellido Materno" for="apmaterno" />
					<p:inputText id="apmaterno"
						value="#{patientPersistence.model.maternalLastName}" />
					<p:outputLabel value="Nombre" for="name" />
					<p:inputText id="name" value="#{patientPersistence.model.name}"
						required="true" />
					<p:outputLabel value="Estado de Nacimiento:" for="entidadNac" />
					<p:selectOneMenu id="entidadNac"
						value="#{patientPersistence.model.entidadNacimiento}"
						converter="#{entidadConverter}" style="width:100%">
						<f:selectItems value="#{entidadQuery.queryListDM}" var="_entidad"
							itemLabel="#{_entidad.name}" itemValue="#{_entidad}"></f:selectItems>
					</p:selectOneMenu>
					<p:outputLabel value="Telefono" for="telefono" />
					<p:inputText id="telefono"
						value="#{patientPersistence.model.phoneNumber}" />
					<p:outputLabel value="Telefono Movil" for="telefonomovil" />
					<p:inputText id="telefonomovil"
						value="#{patientPersistence.model.phoneNumberMovil}" />
					<p:outputLabel value="Email" for="email" />
					<p:inputText id="email" value="#{patientPersistence.model.email}" />
					<p:outputLabel value="Domicilio" for="domicilio" />
					<p:inputText id="domicilio"
						value="#{patientPersistence.model.address}" />
					<p:outputLabel value="Sexo" for="sexo" />
					<p:selectOneMenu id="sexo" value="#{patientPersistence.model.sex}"
						style="width:100%">
						<f:selectItem itemLabel="F" itemValue="F" />
						<f:selectItem itemLabel="M" itemValue="M" />
					</p:selectOneMenu>
					<h:outputText value="Desea ser notificada por mensajes" />
					<p:selectBooleanCheckbox
						value="#{patientPersistence.model.aceptarmensajes}" />
									<p:outputLabel value="Fecha Nacimiento  (mm/dd/aaaa)" for="popupButtonDateNac" />
					<p:calendar value="#{patientPersistence.model.dateofBirth}"
						id="popupButtonDateNac" required="true" navigator="true"
						locale="es">
						<f:convertDateTime type="date" dateStyle="short" />
					</p:calendar>
				
				</h:panelGrid>
			</p:panel>

			<p:panel header="Datos Extendidos">
	
				<p:panelGrid id="dataPanel" columns="2" style="width:100%" columnClasses="detailsCols,detailsCols">
					<h:outputLabel value="Seguro Popular" for="seguro" />
					<p:inputText id="seguro" style="width:96%"
						value="#{patientPersistence.model.seguroPopular}" />
					<h:outputLabel value="Edad de Primera menstruacion" for="menstruacion" />
					<p:inputText id="menstruacion" style="width:96%"
						value="#{patientPersistence.model.ageMenstruation}">
						<f:convertNumber type="number" />
					</p:inputText>
					<h:outputLabel value="Edad al tener su primer hijo(a)"
						for="primerhijo" />
					<p:inputText id="primerhijo" style="width:96%"
						value="#{patientPersistence.model.ageFirstChild}">
						<f:convertNumber type="number" />
					</p:inputText>
					<h:outputLabel value="Ha amamantado a su hijo" for="amamantado" />
					<p:selectBooleanCheckbox id="amamantado"
						value="#{patientPersistence.model.breastFeedChild}" />
					<h:outputLabel value="AÃ±os desde ultima Cirugia"
						for="ultimacirugia" />
					<p:inputText id="ultimacirugia" style="width:96%"
						value="#{patientPersistence.model.yearsSinceSurgery}">
						<f:convertNumber type="number" />
					</p:inputText>
					<h:outputLabel value="Tipo de cirugia de mama" for="tipocirugia" />
					<p:inputText id="tipocirugia" style="width:96%"
						value="#{patientPersistence.model.typeofsurgery}" />
					<h:outputLabel value="Edad de Menopausia" for="meno" />
					<p:inputText id="meno" style="width:96%"
						value="#{patientPersistence.model.ageMenopause}">
						<f:convertNumber type="number" />
					</p:inputText>
					<h:outputLabel
						value="Edad en que comenzo a tomar Hormonas para la Menopausia"
						for="hormonas" />
					<p:inputText id="hormonas" style="width:96%"
						value="#{patientPersistence.model.ageMenopauseHormones}">
						<f:convertNumber type="number" />
					</p:inputText>
					<h:outputLabel value="Fecha de ultima Mastografia"
						for="popupButtonDate" />
					<p:calendar value="#{patientPersistence.model.dateLastMG}"
						id="popupButtonDate" navigator="true" locale="es">
						<f:convertDateTime type="date" dateStyle="short" />
					</p:calendar>
					<h:outputLabel value="Observaciones" for="observations" />
					<p:inputTextarea id="observations" style="width:96%"
						value="#{patientPersistence.model.observations}" />
					<h:outputLabel value="Municipio" for="muni" />
					<h:outputText id="muni" style="width:96%"
						value="#{patientPersistence.model.municipio.name}" />
					<h:outputLabel value="Entidad" for="entidad" />
					<p:selectOneMenu id="entidad"
						value="#{patientPersistence.model.entidad}"
						converter="#{entidadConverter}">
						<f:selectItems value="#{entidadQuery.queryListDM}" var="_entidad"
							itemLabel="#{_entidad.name}" itemValue="#{_entidad}"></f:selectItems>
					</p:selectOneMenu>
					<h:outputLabel value="Unidad medica:" for="sUnidadMedica" />
					<p:autoComplete id="sUnidadMedica" 
						value="#{patientPersistence.model.unidadmedica}"
						converter="#{unidadMedicaConverter}"
						var="_unidad"
						maxResults="5"
						global="false"
						completeMethod="#{unidadMedicaAutoComplete.complete}"
						itemLabel="#{_unidad.name}"
						itemValue="#{_unidad}"
						dropdown="true"
						forceSelection="true"/>
				</p:panelGrid>
				
				<p:spacer height="30"/>
				
				<p:panelGrid columns="4" style="width:100%" columnClasses="pat1Col, pat2Col, pat3Col, pat4Col">
					<h:outputLabel id="lblPrevEnf" for="txtPrevEnf"
						value="Previas Enfermedades" />
					<p:inputText id="txtPrevEnf" style="width:96%"
						value="#{patientPersistence.previaEnfermedad.illness}" />
					<h:outputText value="" />
					<p:commandButton id="btnPrevEnf" value="+"
						actionListener="#{patientPersistence.addPreviaEnfermedad}"
						update="txtPrevEnf dtaPrevEnf" ajax="true"
						process="@this,txtPrevEnf" />

					<h:outputLabel id="lblCancer" for="txtCancer"
						value="Cancer otras partes" />
					<p:inputText id="txtCancer" style="width:96%"
						value="#{patientPersistence.cancerOtrasPartes.parteCuerpo}" />
					<h:outputText value="" />
					<p:commandButton id="btnCancer" value="+"
						actionListener="#{patientPersistence.addCancerOtrasPartes}"
						update="txtCancer dtaCancer" process="@this,txtCancer"
						ajax="true" />

					<h:outputLabel id="lblParCancer" for="txtParCancer"
						value="Parientes con cancer de mama" />
					<p:inputText id="txtParCancer" style="width:96%"
						value="#{patientPersistence.parienteCancerMama.relative}" />
					<h:outputText value="" />
					<p:commandButton id="btnParCancer" value="+"
						actionListener="#{patientPersistence.addParienteCancerMama}"
						update="txtParCancer dtaPariente" ajax="true"
						process="@this,txtParCancer" />

					<h:outputLabel id="lblSintoma" for="sintoma"
						value="Sintomas de cancer de mama" />
					<p:selectOneMenu id="sintoma" style="width:99%"
						value="#{patientPersistence.sintomaCancerMama.sintomaNombre}">
						<f:selectItem itemLabel="Dolor" itemValue="Dolor" />
						<f:selectItem itemLabel="Sensacion de bolitas en mama" itemValue="Sensacion de bolitas en mama" />
						<f:selectItem itemLabel="Sensacion de bolitas en axila" itemValue="Sensacion de bolitas en axila" />
						<f:selectItem itemLabel="Cambios en la piel: Ulcera" itemValue="Cambios en la piel: Ulcera" />
						<f:selectItem itemLabel="Cambios en la piel: Coloracion" itemValue="Cambios en la piel: Coloracion" />
						<f:selectItem itemLabel="Cambios en la piel: Hundimiento" itemValue="Cambios en la piel: Hundimiento" />
						<f:selectItem itemLabel="Cambios en la piel: Piel de Naranja" itemValue="Cambios en la piel: Piel de Naranja" />
						<f:selectItem itemLabel="Salida de liquido: Sangre" itemValue="Salida de liquido: Sangre" />
						<f:selectItem itemLabel="Salida de liquido: Leche" itemValue="Salida de liquido: Leche" />
						<f:selectItem itemLabel="Salida de liquido: Claro" itemValue="Salida de liquido: Claro" />
						<f:selectItem itemLabel="Salida de liquido: Pus" itemValue="Salida de liquido: Pus" />
						<f:selectItem itemLabel="Cambios en el pezon: Ulcera" itemValue="Cambio en el pezon: Ulcera" />
						<f:selectItem itemLabel="Cambios en el pezon: Hundimiento" itemValue="Cambiosn en el pezon: Hundimiento" />
						<f:selectItem itemLabel="Asimetria de las mamas" itemValue="Asimetria de las mamas" />
					</p:selectOneMenu>

					<p:selectOneMenu id="slcSintoma"
						value="#{patientPersistence.sintomaCancerMama.sintomaLado}"
						style="width:30%">
						<f:selectItem itemLabel="IZQ" itemValue="IZQ" />
						<f:selectItem itemLabel="DER" itemValue="DER" />
					</p:selectOneMenu>
					<p:commandButton id="btnSintoma" value="+"
						actionListener="#{patientPersistence.addSintomaCancerMama}"
						update="sintoma dtaSintomas" ajax="true"
						process="@this,sintoma,slcSintoma" />
				</p:panelGrid>

				<p:spacer height="30"/>

				<h:panelGrid columns="4" width="100%">
					<p:dataList id="dtaPrevEnf" emptyMessage="No definidas"
						value="#{patientPersistence.prevEnfList}" var="_prevEnf">
						<f:facet name="header">Previas Enfermedades</f:facet>
						<p:commandButton id="btnEraseIllnes" title="Borrar"
							icon="ui-icon-close"
							actionListener="#{patientPersistence.erasePreviasEnfermedades}"
							ajax="true" process="@this" update="@parent">
							<f:attribute name="selectIllnes" value="#{_prevEnf}" />
						</p:commandButton>
						<h:outputText value=" #{_prevEnf.illness}" />
						<br />
					</p:dataList>

					<p:dataList id="dtaCancer" emptyMessage="No definidas"
						value="#{patientPersistence.cancerList}" var="_cancer">
						<f:facet name="header">Cancer otras Partes</f:facet>
						<p:commandButton id="btnEraseParteCuerpo" title="Borrar"
							icon="ui-icon-close"
							actionListener="#{patientPersistence.eraseCancerOtrasPartes}"
							ajax="true" process="@this" update="@parent">
							<f:attribute name="selectCancer" value="#{_cancer}" />
						</p:commandButton>
						<h:outputText value=" #{_cancer.parteCuerpo}" />
						<br />
					</p:dataList>

					<p:dataList id="dtaPariente" emptyMessage="No definidas"
						value="#{patientPersistence.parienteList}" var="_pariente">
						<f:facet name="header">Parientes con Cancer</f:facet>
						<p:commandButton id="btnRelative" title="Borrar"
							icon="ui-icon-close"
							actionListener="#{patientPersistence.eraseParienteCancer}"
							ajax="true" process="@this" update="@parent">
							<f:attribute name="selectPariente" value="#{_pariente}" />
						</p:commandButton>
						<h:outputText value=" #{_pariente.relative}" />
						<br />
					</p:dataList>

					<p:dataList id="dtaSintomas" emptyMessage="No definidas"
						value="#{patientPersistence.sintomaList}" var="_sint"
						type="definition" itemType="disc">
						<f:facet name="header">Sintomas Cancer</f:facet>
						<p:commandButton id="btnSintomaNombre" title="Borrar"
							icon="ui-icon-close"
							actionListener="#{patientPersistence.eraseSintomaCancer}"
							ajax="true" process="@this" update="@parent">
							<f:attribute name="selectSintoma" value="#{_sint}" />
						</p:commandButton>
						<h:outputText value="* #{_sint.sintomaNombre}" />
						<f:facet name="description">
							<h:outputText value="Lado - #{_sint.sintomaLado}" />
						</f:facet>
						<br />
					</p:dataList>
				</h:panelGrid>

			</p:panel>

			<br/>
			<br/>

			<p:commandButton id="btnSave" value="Salvar"
				actionListener="#{patientPersistence.save}" update="dataPanel"
				ajax="true" action="/pacientes/busqueda?faces-redirect=true" />
			<p:commandButton dir="btnCancel" value="Cancelar"
				actionListener="#{patientPersistence.cancel}" ajax="false"
				action="/pacientes/busqueda?faces-redirect=true" immediate="true" />
		</h:form>
	</ui:define>
</ui:composition>

</html>
